<p align = center>МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ

<p align = center>РОССИЙСКОЙ ФЕДЕРАЦИИ

<p align = center>ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ БЮДЖЕТНОЕ ОБРАЗОВАТЕЛЬНОЕ УЧРЕЖДЕНИЕ ВЫСШЕГО ОБРАЗОВАНИЯ

<p align = center>«ВЯТСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ»

<p align = center>Институт математики и информационных систем

<p align = center>Факультет автоматики и вычислительной техники

<p align = center>Кафедра систем автоматизации управления

 
<p align = right>Дата сдачи на проверку:

<p align = right>«___» __________ 2022 г.

<p align = right>Проверено:

<p align = right>«___» __________ 2022 г.

<p align = center>Отчет по лабораторной работе № 7

<p align = center>по дисциплине

<p align = center>«Web-программирование»





<p align = center>Разработал студент гр. ИТб-2301-01-00 ________________ /Голованов О.А./

<p align = center>Проверил _________________ /Земцов М.А./

<p align = center>Работа защищена с оценкой	«___________» «___» __________ 2022 г.





<p align = center>Киров 2022

__________
Цель: получение навыков создания сервера приложения.

Задачи:

1. Изучить возможности и методы работы с NancyFX.
1. Создать сервер с помощью NancyFX.
1. Реализовать тестовую авторизацию через запросы на созданный сервер.
1. Составить отчет по выполненным задачам

Ход выполнения:

1. Изучить возможности и методы работы с NancyFX.

В ходе лабораторной работы были изучены возможности и методы работы с NancyFX. Изучена документация по NancyFX.

2. Создать сервер с помощью NancyFX.

В ходе работы был создан сервер на NancyFX. Сервер располагается по адресу http://localhost:8888.

3. Реализовать тестовую авторизацию через через запросы на созданный сервер.

Была создана модель авторизации для NancyFX. Авторизация происходит через POST-запрос.

Результаты запросов представлены на рисунках 1-4. Листинг представлены в листинге 1.

<p align = center>2

__________________________

<p align=center>
<img src=./img/lab7/one.jpg></p>
<p align=center> Рисунок 1 - Успешная авторизация

<p align=center>
<img src=./img/lab7/two.jpg></p>
<p align=center> Рисунок 2 - Заголовки при успешной авторизации

<img src=./img/lab7/three.jpg></p>
<p align=center> Рисунок 3 - Авторизация с ошибкой

<img src=./img/lab7/four.jpg></p>
<p align=center> Рисунок 4 - Заголовки при авторизации с ошибкой

```
using GreenLifeLib;
using Nancy;
using Nancy.ModelBinding;

namespace Server
{
public class AuthoriseModule : NancyModule
{
public AuthoriseModule()
{
Post("/auth", (x) =>
{
x = this.Bind<Account>();
Account acc = new Account();
//TODO: Add code to take account from DB => do the authorise
string login = x.Login;
string password = x.Password;

var response = new Response();

if (login.Equals("oleg") && password.Equals("secretpass"))
{

response.StatusCode = HttpStatusCode.OK;
response.Headers["Access-Control-Allow-Origin"] = "*";
response.Headers["Access-Control-Allow-Method"] = "POST";

string myToken = "lalala.somestring.secretword";
response.Headers["Token"] = myToken;
response.Headers["Access-Control-Expose-Headers"] = "Token, Account";
response.Headers["Content-Type"] = "application/json";

response.Headers["Account"] = System.Text.Json.JsonSerializer.Serialize(acc);
return response;
}
else
{
response.StatusCode = HttpStatusCode.NotFound;
return response;
}
});
}
}
}
```
<p align = center>Листинг 1 - Код модуля авторизации для NancyFX

3. Составить отчет по выполненным задачам

 Список используемой литературы представлен в приложении А.

<p align = center>3


_________

<p align = center>Приложение А

<p align = center>(справочное)

<p align = center>Библиографический список

- https://github.com/NancyFx/Nancy/wiki/Documentation

- https://habr.com/ru/company/piter/blog/318334/

<p align = center>4
